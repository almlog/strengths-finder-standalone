プラン策定前の調査を実施します。対象: $ARGUMENTS

## 目的
実装プランの品質を担保するため、コードを書く前に必要な調査を網羅的に行う。
過去の失敗（API仕様未確認でエンドポイント構築ミス等）を防止する。

## 調査フェーズ（全項目必須）

### 1. 既存コードの現状把握
- 変更対象ファイルを全て特定し、現在の実装を読む
- 依存関係（import/export）を追跡し影響範囲を把握
- 既存テストの有無と内容を確認

### 2. 外部API/サービスの仕様調査
対象が外部API連携を含む場合、以下を必ず実施:
- [ ] 公式ドキュメントのURLを特定し、WebFetch/WebSearchで最新仕様を取得
- [ ] エンドポイントURL形式を正確に確認（推測でURLを構築しない）
- [ ] リクエスト/レスポンスの形式を確認（ヘッダー、ボディ、認証方式）
- [ ] レート制限、サイズ制限、CORSポリシーを確認
- [ ] エラーレスポンスの形式を確認

### 3. 環境・インフラの確認
- [ ] ローカル開発環境での動作方法（エミュレータ、モック等）
- [ ] 環境変数の追加/変更が必要か
- [ ] デプロイ先の制約（ランタイムバージョン、リージョン等）
- [ ] 課金への影響

### 4. セキュリティ確認
- [ ] 秘密情報がフロントエンドに露出しないか
- [ ] 認証/認可の方式は適切か
- [ ] CORS/CSPの考慮は必要か

## 出力フォーマット

調査結果を以下の形式で報告:

```
## 調査結果: [対象]

### 現状
- [現在の実装の要約]

### 外部仕様（該当時）
- エンドポイント: [正確なURL形式]
- 認証方式: [方式]
- リクエスト形式: [形式]
- 制約事項: [制限]
- 情報源: [公式ドキュメントURL]

### 影響範囲
- 変更ファイル: [一覧]
- 影響を受けるテスト: [一覧]

### リスク・懸念
- [特定されたリスク]

### 未確認事項
- [調査できなかった項目と理由]
```

## 禁止事項
- 推測でAPI仕様を決定しない。公式ドキュメントで確認できない場合はその旨を報告
- 調査をスキップしてプラン作成に進まない
- 「たぶん動く」で済ませない。検証可能な根拠を示す
