# 開発ロードマップ

## 目次

1. [現在のバージョン](#1-現在のバージョン)
2. [バージョン履歴](#2-バージョン履歴)
3. [今後の計画](#3-今後の計画)
4. [技術的負債](#4-技術的負債)
5. [開発方針](#5-開発方針)

---

## 1. 現在のバージョン

### v3.4 - 勤怠分析機能（2026年1月）

**リリース日:** 2026-01-09

**主要機能:**
- 楽楽勤怠XLSXファイルの自動分析
- 9種類の違反検出（打刻漏れ、休憩不足、申請漏れ等）
- 36協定残業チェック（7段階アラート）
- 予兆アラート機能（月末残業超過予測）
- 8時出社カレンダー登録者への補正処理
- StrengthsFinder連携（従業員のTop5表示）

**既知の制限:**
- 勤怠データはサーバーに保存されない（プライバシー保護）
- 年間集計は未対応（月次データのみ）

---

## 2. バージョン履歴

### v3.x系（2025年10月〜2026年1月）

| バージョン | リリース日 | 主要機能 |
|-----------|-----------|---------|
| v3.4 | 2026-01-09 | 勤怠分析機能、36協定チェック |
| v3.3 | 2025-11-05 | 「分析について」タブ、用語統一 |
| v3.2.1 | 2025-11-04 | スコアツールチップ、計算バグ修正 |
| v3.2 | 2025-10-31 | チームシミュレーション機能 |
| v3.1.1 | 2025-10-31 | マネージャーモードUI改善 |
| v3.1 | 2025-10-31 | マネージャーモード（利益率計算） |

### v1.x系（2025年1月〜10月）

| バージョン | リリース日 | 主要機能 |
|-----------|-----------|---------|
| v1.3 | 2025-10-31 | SF-onlyモード大幅改善 |
| v1.2 | 2025-01-23 | SF-onlyモード分析改善 |
| v1.1 | 2025-01-23 | Belbin理論統合、インポートバグ修正 |
| v1.0 | 2025-01-22 | 初版リリース（プロファイル分析） |

---

### 詳細な変更履歴

#### v3.4: 勤怠分析機能（2026-01-09）

**新機能:**
- XLSXファイルのアップロードと自動解析
- 違反検出:
  - 打刻漏れ（出勤/退勤）
  - 休憩時間不足（法定基準）
  - 遅刻/早退/早出申請漏れ
  - 時間有休の打刻漏れ
  - 深夜休憩申請漏れ
  - 備考欄未記入・フォーマット警告
- 36協定チェック（7段階）
- 予兆アラート（月末残業予測）
- 8時出社カレンダー登録者への補正処理（カレンダー不整合の誤検出対応）
- StrengthsFinder連携（従業員Top5表示）

**UIタブ構成:**
- サマリー / 従業員別 / 部門別 / 違反一覧

---

#### v3.3: 分析手法の説明タブ（2025-11-05）

**新機能:**
- 「分析について」タブを新設
- アコーディオンUIで情報整理
- 学術文献への参照リンク

**用語統一:**
- 「MBTI × StrengthsFinder」→「StrengthsFinder × MBTI」
- StrengthsFinderを主軸、MBTIを補助として再定義

---

#### v3.2.1: スコアツールチップ（2025-11-04）

**バグ修正:**
- リーダーシップ/チーム適合度スコアの計算ロジック修正
- 表示値とツールチップ値の不一致を解消

**新機能:**
- スコアにマウスオーバーで計算内訳を表示
- 300ms遅延表示でUX最適化
- ダークモード対応

**UI改善:**
- 動的ヘッダー表示（部署コード/メンバー名）
- 選択メンバー分析にチーム特性ナラティブ追加

---

#### v3.2: チームシミュレーション（2025-10-31）

**新機能:**
- ドラッグ&ドロップによるチーム編成
- 最大10グループ管理
- リアルタイム強み分布可視化
- グループ分析（PersonalityAnalysisEngine統合）
- チーム特性ナラティブ自動生成
- シナリオ保存/エクスポート/インポート
- 本番反映機能

**技術:**
- @dnd-kit導入
- SimulationService/SimulationContext実装
- 38テストケース

---

#### v3.1: マネージャーモード（2025-10-31）

**新機能:**
- 利益率計算機能
- ステージマスタ管理（S1-S4, CONTRACT, BP）
- 単価情報管理（月額/時給）
- 利益率ダッシュボード
- 雇用形態別原価計算

**アクセス:**
- `?mode=manager` パラメータで有効化

---

#### v1.3: SF-onlyモード大幅改善（2025-10-31）

**改善内容:**
- 34資質の固有特性記述
- 7段階スコア評価（旧3段階）
- 20+種類の役割タイプ（旧7種類）
- 数千〜数万通りのパターン生成

**背景:**
- 344,960通りの資質組み合わせに対し、従来は数十パターンしか生成されなかった
- 「固定値かよ」というフィードバックに対応

---

#### v1.2: SF-onlyモード分析改善（2025-01-23）

**改善内容:**
- 固定文字列を廃止
- スコアベースの動的メッセージ生成
- `buildStrengthsOnlyProfileSummary()`メソッド実装

---

#### v1.1: Belbin理論統合（2025-01-23）

**新機能:**
- Belbin 9ロール理論によるチーム適合度計算
- 16MBTIタイプへのBelbinロール割り当て
- 内向型・外向型の等しい評価

**バグ修正:**
- インポート後のデータ消失問題を修正
- Context stateからのエクスポートに変更

---

#### v1.0: 初版リリース（2025-01-22）

**コア機能:**
- メンバー管理（追加/編集/削除）
- StrengthsFinder 34資質入力
- 16Personalities/MBTI入力
- 個人分析（プロファイルカード）
- 部署分析（3カラムUI）
- 選択メンバー分析
- 所有者分析（逆引き）
- JSON形式インポート/エクスポート
- ダークモード

**分析スコア:**
- 相性スコア（Synergy Score）
- チーム適合度（Team Fit Score）
- リーダーシップ潜在力（Leadership Potential）

---

## 3. 今後の計画

### 短期計画（3〜6ヶ月）

| 機能 | 優先度 | 説明 |
|------|--------|------|
| 一括選択機能 | 高 | メンバーの一括選択UI改善（SPEC_BULK_SELECTION.md） |
| 勤怠分析テスト拡充 | 高 | AttendanceServiceのテストカバレッジ向上 |
| 休憩時間カラム対応 | 中 | XLSX列36の休憩時間取得 |
| CSV形式インポート | 中 | Excel以外からのデータ取り込み |
| 統計ダッシュボード | 中 | 全社的な傾向分析 |

### 中期計画（6〜12ヶ月）

| 機能 | 説明 |
|------|------|
| チーム分析ダッシュボード | 複数チームの比較分析 |
| キャリアパス提案 | 資質に基づくキャリア方向性の提示 |
| 組織ベンチマーク | 業界標準との比較 |
| レポート自動生成 | PDF形式でのレポート出力 |
| LINE WORKS連携 | Webhook通知機能 |

### 長期ビジョン（1年以上）

| 機能 | 説明 |
|------|------|
| AI分析（オプション） | 機械学習による傾向予測 |
| エンタープライズ版 | 複数組織対応、権限管理強化 |
| グローバル展開 | 多言語対応（英語等） |
| モバイルアプリ | iOS/Android対応 |

---

## 4. 技術的負債

### 高優先度

| 項目 | 現状 | 対策 |
|------|------|------|
| ESLint/Prettier | 未導入 | 導入してコード品質統一 |
| テストカバレッジ | 部分的 | 全サービスに対するテスト追加 |
| 型定義の整理 | 複数ファイルに分散 | modelsフォルダに統合 |

### 中優先度

| 項目 | 現状 | 対策 |
|------|------|------|
| PWA対応 | 未対応 | Service Worker導入 |
| パフォーマンス最適化 | 未測定 | Lighthouse監査、React.memo適用 |
| アクセシビリティ | 基本対応 | WCAG 2.1 AA準拠 |

### 低優先度

| 項目 | 現状 | 対策 |
|------|------|------|
| データ暗号化 | なし | LocalStorage暗号化オプション |
| オフラインモード強化 | 基本対応 | 完全オフライン動作 |
| 国際化 | 日本語のみ | i18n対応 |

---

## 5. 開発方針

### 5.1 品質基準

**Spec駆動開発:**
- 新機能は必ず仕様書（SPEC_*.md）を先に作成
- 仕様書に基づいて実装
- 完了前に仕様書との照合

**TDD（テスト駆動開発）:**
1. **RED**: テストを先に書く（失敗を確認）
2. **GREEN**: 実装してテストを通す
3. **REFACTOR**: コードをきれいにする

**開発品質誓約書:**
- [DEVELOPMENT_QUALITY_PLEDGE.md](../DEVELOPMENT_QUALITY_PLEDGE.md) を必読
- 過去のインシデント（2025-11-04）から学習

### 5.2 コミット前チェックリスト

- [ ] テストを先に書いた（RED phase）
- [ ] 実装してテストが通った（GREEN phase）
- [ ] 開発サーバーでコンパイル成功
- [ ] TypeScriptエラーがない
- [ ] 関連する既存テストが全てPASS

### 5.3 ブランチ戦略

| ブランチ | 用途 |
|---------|------|
| main | 本番環境（GitHub Pages自動デプロイ） |
| feature/* | 新機能開発 |
| fix/* | バグ修正 |
| docs/* | ドキュメント更新 |

### 5.4 リリースプロセス

1. feature/fixブランチで開発
2. ローカルでテスト実行
3. プルリクエスト作成
4. コードレビュー
5. mainにマージ
6. GitHub Actions自動デプロイ
7. 本番動作確認

---

## 付録: 開発ログ

開発の詳細な履歴は以下を参照:

| ログファイル | 内容 |
|-------------|------|
| [Log_2026-01-08_1702_Attendance_Analysis_Implementation.md](../dev_logs/Log_2026-01-08_1702_Attendance_Analysis_Implementation.md) | 勤怠分析機能初期実装 |
| [Log_2026-01-09_1925_Attendance_Analysis_Enhancement.md](../dev_logs/Log_2026-01-09_1925_Attendance_Analysis_Enhancement.md) | 予兆アラート、ドキュメント更新 |

---

*最終更新: 2026年1月10日 | バージョン: v3.4*
